<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackgrove Point Buy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function updateTable() {
            let totalPoints = 0;

            for (let i = 1; i <= 7; i++) {
                const scoreInput = document.getElementById(`score${i}`);
                const bonusInput = document.getElementById(`bonus${i}`);
                const score = parseInt(scoreInput.value);
                const bonus = parseInt(bonusInput.value);
                
                // Calculate point cost
                let pointCost = 0;
                if (score >= 14) pointCost = (score === 14) ? 7 : 9;
                else if (score >= 8) pointCost = score - 8;
                
                document.getElementById(`pointCost${i}`).innerText = pointCost;
                
                // Sum up the point costs
                totalPoints += pointCost;

                // Calculate total (Score + Bonus)
                const total = score + bonus;
                document.getElementById(`total${i}`).innerText = total;

                // Calculate modifier (Total-10)/2 rounded down
                const modifier = Math.floor((total - 10) / 2);
                document.getElementById(`modifier${i}`).innerText = modifier;

                // Calculate Save DC (10 + Total) / 2 rounded up
                const saveDC = Math.ceil((10 + total) / 2);
                document.getElementById(`saveDC${i}`).innerText = saveDC;
            }

            // Update total point cost
            document.getElementById("totalPoints").innerText = totalPoints+"/30";
        }
    </script>
</head>
<body class="container mt-4">
    <h3 class="mb-4">Point Buy</h3>
    <table class="table table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Ability</th>
                <th>Score</th>
                <th>Point Cost</th>
                <th>Bonus</th>
                <th>Total</th>
                <th>Modifier</th>
                <th>Save DC</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows for each stat -->
            <tr style="background-color: #C9DAF8;">
                <td>Reason</td>
                <td><input type="number" id="score1" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost1">0</td>
                <td><input type="number" id="bonus1" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total1">8</td>
                <td id="modifier1">-1</td>
                <td id="saveDC1">9</td>
            </tr>
            <tr style="background-color: #D9D2E9;">
                <td>Intuition</td>
                <td><input type="number" id="score2" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost2">0</td>
                <td><input type="number" id="bonus2" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total2">8</td>
                <td id="modifier2">-1</td>
                <td id="saveDC2">9</td>
            </tr>
            <tr style="background-color: #D0E0E3;">
                <td>Spirit</td>
                <td><input type="number" id="score3" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost3">0</td>
                <td><input type="number" id="bonus3" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total3">8</td>
                <td id="modifier3">-1</td>
                <td id="saveDC3">9</td>
            </tr>
            <tr style="background-color: #FCE5CD;">
                <td>Charisma</td>
                <td><input type="number" id="score4" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost4">0</td>
                <td><input type="number" id="bonus4" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total4">8</td>
                <td id="modifier4">-1</td>
                <td id="saveDC4">9</td>
            </tr>
            <tr style="background-color: #F4CCCC;">
                <td>Strength</td>
                <td><input type="number" id="score5" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost5">0</td>
                <td><input type="number" id="bonus5" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total5">8</td>
                <td id="modifier5">-1</td>
                <td id="saveDC5">9</td>
            </tr>
            <tr style="background-color: #FFF2CC;">
                <td>Dexterity</td>
                <td><input type="number" id="score6" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost6">0</td>
                <td><input type="number" id="bonus6" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total6">8</td>
                <td id="modifier6">-1</td>
                <td id="saveDC6">9</td>
            </tr>
            <tr style="background-color: #EAD1DC;">
                <td>Endurance</td>
                <td><input type="number" id="score7" class="form-control" value="8" min="8" max="15" oninput="updateTable()"></td>
                <td id="pointCost7">0</td>
                <td><input type="number" id="bonus7" class="form-control" value="0" oninput="updateTable()"></td>
                <td id="total7">8</td>
                <td id="modifier7">-1</td>
                <td id="saveDC7">9</td>
            </tr>
        </tbody>
    </table>

    <!-- Total point cost -->
    <div class="mt-3">
        <h5>Total Points: <span id="totalPoints">0/30</span></h5>
    </div>
</body>
</html>
